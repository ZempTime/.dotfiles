# ─────────────────────────────────────────────────────────────
# Terminal & Colors
# ─────────────────────────────────────────────────────────────
set-option -sa terminal-overrides ",xterm*:Tc"
set -g default-terminal "screen-256color"

# ─────────────────────────────────────────────────────────────
# Prefix Key: C-Space
# ─────────────────────────────────────────────────────────────
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# ─────────────────────────────────────────────────────────────
# Window Navigation
# ─────────────────────────────────────────────────────────────
# Shift+Alt+H/L to switch windows (doesn't conflict with Neovim)
bind -n M-H previous-window
bind -n M-L next-window

# ─────────────────────────────────────────────────────────────
# Pane Splitting (intuitive keys, keep current path)
# ─────────────────────────────────────────────────────────────
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# New window keeps current path
bind c new-window -c "#{pane_current_path}"

# ─────────────────────────────────────────────────────────────
# Pane Management
# ─────────────────────────────────────────────────────────────
bind q kill-pane
bind z resize-pane -Z  # Toggle zoom (already default, but explicit)

# Resize panes with prefix + H/J/K/L (repeatable)
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ─────────────────────────────────────────────────────────────
# Quality of Life
# ─────────────────────────────────────────────────────────────
# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

# Faster escape time (better for Neovim)
set -sg escape-time 10

# Enable mouse (for scrolling, resizing, clicking panes)
set -g mouse on

# Reload config
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# ─────────────────────────────────────────────────────────────
# Plugins (TPM)
# ─────────────────────────────────────────────────────────────
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator'

# Initialize TPM (keep this at the bottom)
run '~/.tmux/plugins/tpm/tpm'
